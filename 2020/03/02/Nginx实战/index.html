<!DOCTYPE html>
<html lang=zh>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?0e76dffc6c1c980a49f2d1fa69fd8148";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>


<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="1. Nginxç®€ä»‹Nginx æ˜¯ä¸€æ¬¾è½»é‡çº§çš„ Web æœåŠ¡å™¨ã€‚é€šå¸¸ç”¨åœ¨åå‘ä»£ç†ã€è´Ÿè½½å‡è¡¡å’Œ HTTP ç¼“å­˜ã€‚ç›®å‰å…¨çƒå¾ˆå¤šçŸ¥åäº’è”ç½‘å…¬å¸åœ¨ä½¿ç”¨ Nginxã€‚ åå‘ä»£ç†å’Œæ­£å‘ä»£ç†Nginx çš„ä¸€ä¸ªä½œç”¨æ˜¯åå‘ä»£ç†ï¼Œé‚£ä»€ä¹ˆæ˜¯æ­£å‘ä»£ç†å’Œåå‘ä»£ç†ï¼Ÿåœ¨çŸ¥ä¹ä¸Šæœ‰ä¸€ä¸ªå›ç­”æ€»ç»“çš„ä¸é”™æ”¾åˆ°è¿™é‡Œã€‚ ä»¥ä¸‹å†…å®¹æ¥è‡ªçŸ¥ä¹ç”¨æˆ·ç­é•¿ä»–å§å¤«çš„å›ç­”  æ­£å‘ä»£ç†éšè—çœŸå®å®¢æˆ·ç«¯ï¼Œåå‘ä»£ç†éšè—çœŸå®æœåŠ¡ç«¯ã€‚  ä»¥ä¸‹å†…å®¹æ¥è‡ªçŸ¥ä¹ç”¨æˆ·åˆ˜å¿—å†›çš„å›">
<meta property="og:type" content="article">
<meta property="og:title" content="Nginxå®æˆ˜">
<meta property="og:url" content="http:&#x2F;&#x2F;yoursite.com&#x2F;2020&#x2F;03&#x2F;02&#x2F;Nginx%E5%AE%9E%E6%88%98&#x2F;index.html">
<meta property="og:site_name" content="ä¹ç‚¹ä¸‹ç­">
<meta property="og:description" content="1. Nginxç®€ä»‹Nginx æ˜¯ä¸€æ¬¾è½»é‡çº§çš„ Web æœåŠ¡å™¨ã€‚é€šå¸¸ç”¨åœ¨åå‘ä»£ç†ã€è´Ÿè½½å‡è¡¡å’Œ HTTP ç¼“å­˜ã€‚ç›®å‰å…¨çƒå¾ˆå¤šçŸ¥åäº’è”ç½‘å…¬å¸åœ¨ä½¿ç”¨ Nginxã€‚ åå‘ä»£ç†å’Œæ­£å‘ä»£ç†Nginx çš„ä¸€ä¸ªä½œç”¨æ˜¯åå‘ä»£ç†ï¼Œé‚£ä»€ä¹ˆæ˜¯æ­£å‘ä»£ç†å’Œåå‘ä»£ç†ï¼Ÿåœ¨çŸ¥ä¹ä¸Šæœ‰ä¸€ä¸ªå›ç­”æ€»ç»“çš„ä¸é”™æ”¾åˆ°è¿™é‡Œã€‚ ä»¥ä¸‹å†…å®¹æ¥è‡ªçŸ¥ä¹ç”¨æˆ·ç­é•¿ä»–å§å¤«çš„å›ç­”  æ­£å‘ä»£ç†éšè—çœŸå®å®¢æˆ·ç«¯ï¼Œåå‘ä»£ç†éšè—çœŸå®æœåŠ¡ç«¯ã€‚  ä»¥ä¸‹å†…å®¹æ¥è‡ªçŸ¥ä¹ç”¨æˆ·åˆ˜å¿—å†›çš„å›">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https:&#x2F;&#x2F;i.loli.net&#x2F;2020&#x2F;02&#x2F;25&#x2F;xsRXDkOwZqFcf4H.png">
<meta property="og:image" content="https:&#x2F;&#x2F;i.loli.net&#x2F;2020&#x2F;02&#x2F;25&#x2F;64RVQMkJL9CltEg.png">
<meta property="og:image" content="https:&#x2F;&#x2F;i.loli.net&#x2F;2020&#x2F;02&#x2F;25&#x2F;6b1Ci8rVLFvsKyI.png">
<meta property="og:image" content="https:&#x2F;&#x2F;i.loli.net&#x2F;2020&#x2F;02&#x2F;25&#x2F;esWGZ4N5gbETthv.png">
<meta property="og:image" content="https:&#x2F;&#x2F;i.loli.net&#x2F;2020&#x2F;02&#x2F;25&#x2F;lMk19ReY6JW8LUK.png">
<meta property="og:image" content="https:&#x2F;&#x2F;i.loli.net&#x2F;2020&#x2F;02&#x2F;25&#x2F;n7P35w2ulsGEjJK.png">
<meta property="og:image" content="https:&#x2F;&#x2F;i.loli.net&#x2F;2020&#x2F;02&#x2F;25&#x2F;c5VS4IaYlMFrNio.png">
<meta property="og:image" content="https:&#x2F;&#x2F;i.loli.net&#x2F;2020&#x2F;02&#x2F;25&#x2F;XstLd1zhr9HA4KV.png">
<meta property="og:image" content="https:&#x2F;&#x2F;i.loli.net&#x2F;2020&#x2F;02&#x2F;25&#x2F;P2NS3urEvDlmJZI.png">
<meta property="og:image" content="https:&#x2F;&#x2F;i.loli.net&#x2F;2020&#x2F;02&#x2F;25&#x2F;cbouvn5xGCwpUJh.png">
<meta property="og:image" content="https:&#x2F;&#x2F;i.loli.net&#x2F;2020&#x2F;02&#x2F;25&#x2F;GAKflMSde9aN2Yy.png">
<meta property="og:image" content="https:&#x2F;&#x2F;i.loli.net&#x2F;2020&#x2F;02&#x2F;25&#x2F;fXJUszFpOSZ3aIR.png">
<meta property="og:image" content="https:&#x2F;&#x2F;i.loli.net&#x2F;2020&#x2F;02&#x2F;25&#x2F;gQAam9pIu24ZyUs.png">
<meta property="og:image" content="https:&#x2F;&#x2F;i.loli.net&#x2F;2020&#x2F;02&#x2F;25&#x2F;dtw5vpSKl7WjBoy.png">
<meta property="og:image" content="https:&#x2F;&#x2F;i.loli.net&#x2F;2020&#x2F;02&#x2F;25&#x2F;X54hFOziWCb21ou.png">
<meta property="og:image" content="https:&#x2F;&#x2F;i.loli.net&#x2F;2020&#x2F;02&#x2F;25&#x2F;D8UZTGRMo57EISV.png">
<meta property="og:image" content="https:&#x2F;&#x2F;i.loli.net&#x2F;2020&#x2F;02&#x2F;25&#x2F;9MqkOUJj21RD75L.png">
<meta property="og:updated_time" content="2020-04-20T07:18:08.408Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https:&#x2F;&#x2F;i.loli.net&#x2F;2020&#x2F;02&#x2F;25&#x2F;xsRXDkOwZqFcf4H.png">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>Nginxå®æˆ˜</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- persian styles -->
    
      <link rel="stylesheet" href="/css/rtl.css">
    
    <!-- rss -->
    
    
</head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">é¦–é¡µ</a></li>
         
          <li><a href="/about/">å…³äº</a></li>
         
          <li><a href="/archives/">å½’æ¡£</a></li>
         
          <li><a href="/project/">é¡¹ç›®</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2020/03/05/macOS%E4%BD%BF%E7%94%A8iTerm2%E9%85%8D%E7%BD%AEssh%E8%BF%9E%E6%8E%A5/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/2020/01/17/%E5%9F%BA%E4%BA%8E%20Flask%20%E5%92%8C%20Vue%20%E7%9A%84%E8%AF%8D%E4%BA%91%E7%94%9F%E6%88%90%E5%BA%94%E7%94%A8/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">ä¸Šä¸€ç¯‡</span>
      <span id="i-next" class="info" style="display:none;">ä¸‹ä¸€ç¯‡</span>
      <span id="i-top" class="info" style="display:none;">è¿”å›é¡¶éƒ¨</span>
      <span id="i-share" class="info" style="display:none;">åˆ†äº«æ–‡ç« </span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://yoursite.com/2020/03/02/Nginx%E5%AE%9E%E6%88%98/" target="_blank" rel="noopener"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://yoursite.com/2020/03/02/Nginx%E5%AE%9E%E6%88%98/&text=Nginxå®æˆ˜" target="_blank" rel="noopener"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://yoursite.com/2020/03/02/Nginx%E5%AE%9E%E6%88%98/&title=Nginxå®æˆ˜" target="_blank" rel="noopener"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://yoursite.com/2020/03/02/Nginx%E5%AE%9E%E6%88%98/&is_video=false&description=Nginxå®æˆ˜" target="_blank" rel="noopener"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Nginxå®æˆ˜&body=Check out this article: http://yoursite.com/2020/03/02/Nginx%E5%AE%9E%E6%88%98/" target="_blank" rel="noopener"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://yoursite.com/2020/03/02/Nginx%E5%AE%9E%E6%88%98/&title=Nginxå®æˆ˜" target="_blank" rel="noopener"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://yoursite.com/2020/03/02/Nginx%E5%AE%9E%E6%88%98/&title=Nginxå®æˆ˜" target="_blank" rel="noopener"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://yoursite.com/2020/03/02/Nginx%E5%AE%9E%E6%88%98/&title=Nginxå®æˆ˜" target="_blank" rel="noopener"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://yoursite.com/2020/03/02/Nginx%E5%AE%9E%E6%88%98/&title=Nginxå®æˆ˜" target="_blank" rel="noopener"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://yoursite.com/2020/03/02/Nginx%E5%AE%9E%E6%88%98/&name=Nginxå®æˆ˜&description=" target="_blank" rel="noopener"><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-Nginxç®€ä»‹"><span class="toc-number">1.</span> <span class="toc-text">1. Nginxç®€ä»‹</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#åå‘ä»£ç†å’Œæ­£å‘ä»£ç†"><span class="toc-number">1.1.</span> <span class="toc-text">åå‘ä»£ç†å’Œæ­£å‘ä»£ç†</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-NginxåŸºæœ¬ä½¿ç”¨"><span class="toc-number">2.</span> <span class="toc-text">2. NginxåŸºæœ¬ä½¿ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Nginxå®‰è£…"><span class="toc-number">2.1.</span> <span class="toc-text">Nginxå®‰è£…</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-å®æˆ˜"><span class="toc-number">3.</span> <span class="toc-text">3. å®æˆ˜</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#åå‘ä»£ç†"><span class="toc-number">3.1.</span> <span class="toc-text">åå‘ä»£ç†</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#è´Ÿè½½å‡è¡¡"><span class="toc-number">3.2.</span> <span class="toc-text">è´Ÿè½½å‡è¡¡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#httpsè¯ä¹¦é…ç½®"><span class="toc-number">3.3.</span> <span class="toc-text">httpsè¯ä¹¦é…ç½®</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#æ›´å¤šæ¨è"><span class="toc-number">4.</span> <span class="toc-text">æ›´å¤šæ¨è</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        Nginxå®æˆ˜
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">ä¹ç‚¹ä¸‹ç­</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2020-03-02T12:21:00.000Z" itemprop="datePublished">2020-03-02</time>
        
      
    </div>


      

      

    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h3 id="1-Nginxç®€ä»‹"><a href="#1-Nginxç®€ä»‹" class="headerlink" title="1. Nginxç®€ä»‹"></a>1. Nginxç®€ä»‹</h3><p><a href="https://www.nginx.com/" target="_blank" rel="noopener">Nginx</a> æ˜¯ä¸€æ¬¾è½»é‡çº§çš„ Web æœåŠ¡å™¨ã€‚é€šå¸¸ç”¨åœ¨<strong>åå‘ä»£ç†</strong>ã€<strong>è´Ÿè½½å‡è¡¡</strong>å’Œ <strong>HTTP ç¼“å­˜</strong>ã€‚ç›®å‰å…¨çƒå¾ˆå¤šçŸ¥åäº’è”ç½‘å…¬å¸åœ¨ä½¿ç”¨ Nginxã€‚</p>
<h4 id="åå‘ä»£ç†å’Œæ­£å‘ä»£ç†"><a href="#åå‘ä»£ç†å’Œæ­£å‘ä»£ç†" class="headerlink" title="åå‘ä»£ç†å’Œæ­£å‘ä»£ç†"></a>åå‘ä»£ç†å’Œæ­£å‘ä»£ç†</h4><p>Nginx çš„ä¸€ä¸ªä½œç”¨æ˜¯åå‘ä»£ç†ï¼Œé‚£ä»€ä¹ˆæ˜¯æ­£å‘ä»£ç†å’Œåå‘ä»£ç†ï¼Ÿåœ¨çŸ¥ä¹ä¸Šæœ‰ä¸€ä¸ªå›ç­”æ€»ç»“çš„ä¸é”™æ”¾åˆ°è¿™é‡Œã€‚</p>
<p>ä»¥ä¸‹å†…å®¹æ¥è‡ªçŸ¥ä¹ç”¨æˆ·<a href="https://www.zhihu.com/question/24723688" target="_blank" rel="noopener">ç­é•¿ä»–å§å¤«</a>çš„å›ç­”</p>
<blockquote>
<p>æ­£å‘ä»£ç†éšè—çœŸå®å®¢æˆ·ç«¯ï¼Œåå‘ä»£ç†éšè—çœŸå®æœåŠ¡ç«¯ã€‚</p>
</blockquote>
<p>ä»¥ä¸‹å†…å®¹æ¥è‡ªçŸ¥ä¹ç”¨æˆ·<a href="https://www.zhihu.com/question/24723688" target="_blank" rel="noopener">åˆ˜å¿—å†›</a>çš„å›ç­”</p>
<blockquote>
<p>æˆ‘ä»¬å¸¸è¯´çš„ä»£ç†ä¹Ÿå°±æ˜¯åªæ­£å‘ä»£ç†ï¼Œæ­£å‘ä»£ç†çš„è¿‡ç¨‹ï¼Œå®ƒéšè—äº†çœŸå®çš„è¯·æ±‚å®¢æˆ·ç«¯ï¼ŒæœåŠ¡ç«¯ä¸çŸ¥é“çœŸå®çš„å®¢æˆ·ç«¯æ˜¯è°ï¼Œå®¢æˆ·ç«¯è¯·æ±‚çš„æœåŠ¡éƒ½è¢«ä»£ç†æœåŠ¡å™¨ä»£æ›¿æ¥è¯·æ±‚ï¼ŒæŸäº›ç§‘å­¦ä¸Šç½‘å·¥å…·æ‰®æ¼”çš„å°±æ˜¯å…¸å‹çš„æ­£å‘ä»£ç†è§’è‰²ã€‚ç”¨æµè§ˆå™¨è®¿é—® <a href="http://www.google.com" target="_blank" rel="noopener">http://www.google.com</a> æ—¶ï¼Œè¢«æ®‹å¿çš„blockï¼Œäºæ˜¯ä½ å¯ä»¥åœ¨å›½å¤–æ­å»ºä¸€å°ä»£ç†æœåŠ¡å™¨ï¼Œè®©ä»£ç†å¸®æˆ‘å»è¯·æ±‚google.comï¼Œä»£ç†æŠŠè¯·æ±‚è¿”å›çš„ç›¸åº”ç»“æ„å†è¿”å›ç»™æˆ‘ã€‚</p>
</blockquote>
<p><img src="https://i.loli.net/2020/02/25/xsRXDkOwZqFcf4H.png" alt="image.png"></p>
<blockquote>
<p>åå‘ä»£ç†éšè—äº†çœŸå®çš„æœåŠ¡ç«¯ï¼Œå½“æˆ‘ä»¬è¯·æ±‚ <a href="http://www.baidu.com" target="_blank" rel="noopener">www.baidu.com</a> çš„æ—¶å€™ï¼Œå°±åƒæ‹¨æ‰“10086ä¸€æ ·ï¼ŒèƒŒåå¯èƒ½æœ‰æˆåƒä¸Šä¸‡å°æœåŠ¡å™¨ä¸ºæˆ‘ä»¬æœåŠ¡ï¼Œä½†å…·ä½“æ˜¯å“ªä¸€å°ï¼Œä½ ä¸çŸ¥é“ï¼Œä¹Ÿä¸éœ€è¦çŸ¥é“ï¼Œä½ åªéœ€è¦çŸ¥é“åå‘ä»£ç†æœåŠ¡å™¨æ˜¯è°å°±å¥½äº†ï¼Œ<a href="http://www.baidu.com" target="_blank" rel="noopener">www.baidu.com</a> å°±æ˜¯æˆ‘ä»¬çš„åå‘ä»£ç†æœåŠ¡å™¨ï¼Œåå‘ä»£ç†æœåŠ¡å™¨ä¼šå¸®æˆ‘ä»¬æŠŠè¯·æ±‚è½¬å‘åˆ°çœŸå®çš„æœåŠ¡å™¨é‚£é‡Œå»ã€‚Nginxå°±æ˜¯æ€§èƒ½éå¸¸å¥½çš„åå‘ä»£ç†æœåŠ¡å™¨ï¼Œç”¨æ¥åšè´Ÿè½½å‡è¡¡ã€‚</p>
</blockquote>
<blockquote>
<p>ä¸¤è€…çš„åŒºåˆ«åœ¨äºä»£ç†çš„å¯¹è±¡ä¸ä¸€æ ·ï¼šæ­£å‘ä»£ç†ä»£ç†çš„å¯¹è±¡æ˜¯å®¢æˆ·ç«¯ï¼Œåå‘ä»£ç†ä»£ç†çš„å¯¹è±¡æ˜¯æœåŠ¡ç«¯</p>
</blockquote>
<p><img src="https://i.loli.net/2020/02/25/64RVQMkJL9CltEg.png" alt="image.png"></p>
<p>åŸºäºå¯¹ä¸Šé¢çš„ç†è§£ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° Nginx å¯¹äºå¤„ç†æœ‰é«˜å¹¶å‘éœ€æ±‚çš„ç½‘ç«™æ˜¯æœ‰éå¸¸å¤§çš„ä½œç”¨çš„ã€‚ä¸‹é¢æˆ‘ä»¬çœ‹ä¸€ä¸‹åœ¨ MacOS ä¸Š Nginx çš„å®‰è£…å’ŒåŸºæœ¬ä½¿ç”¨ã€‚</p>
<h3 id="2-NginxåŸºæœ¬ä½¿ç”¨"><a href="#2-NginxåŸºæœ¬ä½¿ç”¨" class="headerlink" title="2. NginxåŸºæœ¬ä½¿ç”¨"></a>2. NginxåŸºæœ¬ä½¿ç”¨</h3><h4 id="Nginxå®‰è£…"><a href="#Nginxå®‰è£…" class="headerlink" title="Nginxå®‰è£…"></a>Nginxå®‰è£…</h4><p>æˆ‘ä»¬ä½¿ç”¨ homebrew æ¥å®‰è£… Nginx</p>
<ul>
<li><p>æœç´¢Nginx</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew search nginx</span><br></pre></td></tr></table></figure>
</li>
<li><p>å®‰è£…Nginx</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install nginx</span><br></pre></td></tr></table></figure>
<p>å¦‚æœ homebrew éœ€è¦æ›´æ–°çš„è¯è¿™ä¸ªè¿‡ç¨‹ä¼šæ¯”è¾ƒæ…¢ï¼Œè€å¿ƒç­‰å¾…å³å¯ã€‚å®‰è£…å®Œæˆåä¼šæœ‰å¦‚ä¸‹æç¤ºï¼š</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">Docroot is: /usr/local/var/www</span><br><span class="line"></span><br><span class="line">The default port has been set in /usr/local/etc/nginx/nginx.conf to 8080 so that</span><br><span class="line">nginx can run without sudo.</span><br><span class="line"></span><br><span class="line">nginx will load all files in /usr/local/etc/nginx/servers/.</span><br><span class="line"></span><br><span class="line">To have launchd start nginx now and restart at login:</span><br><span class="line">  brew services start nginx</span><br><span class="line">Or, if you don&apos;t want/need a background service you can just run:</span><br><span class="line">  nginx</span><br><span class="line">==&gt; Summary</span><br><span class="line">ğŸº  /usr/local/Cellar/nginx/1.17.8: 25 files, 2MB</span><br><span class="line">==&gt; `brew cleanup` has not been run in 30 days, running now...</span><br><span class="line">Removing: /usr/local/Cellar/pcre/8.43... (204 files, 5.5MB)</span><br><span class="line">Pruned 1 symbolic links and 1 directories from /usr/local</span><br><span class="line">==&gt; Caveats</span><br><span class="line">==&gt; nginx</span><br><span class="line">Docroot is: /usr/local/var/www</span><br><span class="line"></span><br><span class="line">The default port has been set in /usr/local/etc/nginx/nginx.conf to 8080 so that</span><br><span class="line">nginx can run without sudo.</span><br><span class="line"></span><br><span class="line">nginx will load all files in /usr/local/etc/nginx/servers/.</span><br><span class="line"></span><br><span class="line">To have launchd start nginx now and restart at login:</span><br><span class="line">  brew services start nginx</span><br><span class="line">Or, if you don&apos;t want/need a background service you can just run:</span><br><span class="line">  nginx</span><br></pre></td></tr></table></figure>

<ul>
<li><p>æŸ¥çœ‹Nginxä¿¡æ¯</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew info nginx</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªå‘½ä»¤å’Œå®‰è£…å®Œæˆä¹‹åçš„æç¤ºåŸºæœ¬ä¸€è‡´ï¼Œä¼šæ˜¾ç¤º Nginx çš„åŸºæœ¬é…ç½®ä¿¡æ¯ã€‚</p>
</li>
<li><p>å¸è½½Nginx</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew uninstall Nginx</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„è¿™ä¸ªå‘½ä»¤åªä¼šå¸è½½ Nginx è½¯ä»¶æœ¬èº«ï¼Œå¹¶ä¸ä¼šåˆ é™¤é…ç½®æ–‡ä»¶ã€‚å¦‚æœæˆ‘ä»¬æƒ³å½»åº•åˆ å¹²å‡€ Nginxï¼Œéœ€è¦æ‰‹åŠ¨åˆ é™¤ <code>/usr/local/var/www</code> å’Œ <code>/usr/local/etc/nginx/</code> ä¸‹çš„æ–‡ä»¶ã€‚</p>
</li>
<li><p>æŸ¥çœ‹Nginxç‰ˆæœ¬</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx -v</span><br></pre></td></tr></table></figure>
<p>æˆ‘æœ¬æœºçš„ Nginx ç‰ˆæœ¬å¦‚ä¸‹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx version: nginx/1.17.8</span><br></pre></td></tr></table></figure>
</li>
<li><p>æ£€æŸ¥Nginxé…ç½®æ˜¯å¦æ­£å¸¸</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx -t</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>å¦‚æœæ­£å¸¸çš„è¯ï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°å¦‚ä¸‹è¾“å‡ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nginx: the configuration file /usr/local/etc/nginx/nginx.conf syntax is ok</span><br><span class="line">nginx: configuration file /usr/local/etc/nginx/nginx.conf test is successful</span><br></pre></td></tr></table></figure>

<ul>
<li>é…ç½®æ–‡ä»¶<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /usr/local/etc/nginx/nginx.conf</span><br></pre></td></tr></table></figure>
ä»¥ä¸Šå‘½ä»¤å¯ä»¥è¾“å‡º <code>nginx.conf</code> é»˜è®¤çŠ¶æ€ä¸‹çš„é…ç½®ï¼Œåœ¨å…³é”®çš„åœ°æ–¹æˆ‘åŠ äº†æ³¨é‡Šè¯´æ˜ã€‚</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br></pre></td><td class="code"><pre><span class="line">#user  nobody;</span><br><span class="line">worker_processes  1;</span><br><span class="line">#(1)è¿›ç¨‹æ•°</span><br><span class="line"></span><br><span class="line">#error_log  logs/error.log;</span><br><span class="line">#error_log  logs/error.log  notice;</span><br><span class="line">#error_log  logs/error.log  info;</span><br><span class="line"></span><br><span class="line">#(2)é”™è¯¯æ—¥å¿—ä½ç½® Macä¸Šåœ¨/usr/local/var/log/nginx/</span><br><span class="line"></span><br><span class="line">#pid        logs/nginx.pid;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections  1024;</span><br><span class="line">    #(3)æœ€å¤§è¿æ¥æ•°</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">    include       mime.types;</span><br><span class="line">    default_type  application/octet-stream;</span><br><span class="line"></span><br><span class="line">    #log_format  main  &apos;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &apos;</span><br><span class="line">    #                  &apos;$status $body_bytes_sent &quot;$http_referer&quot; &apos;</span><br><span class="line">    #                  &apos;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&apos;;</span><br><span class="line">    #(4)æ—¥å¿—æ ¼å¼</span><br><span class="line"></span><br><span class="line">    #access_log  logs/access.log  main;</span><br><span class="line">    </span><br><span class="line">    #(5)è®¿é—®æ—¥å¿—ä½ç½® Macä¸Šåœ¨/usr/local/var/log/nginx/</span><br><span class="line"></span><br><span class="line">    sendfile        on;</span><br><span class="line">    #tcp_nopush     on;</span><br><span class="line"></span><br><span class="line">    #keepalive_timeout  0;</span><br><span class="line">    keepalive_timeout  65;</span><br><span class="line"></span><br><span class="line">    #gzip  on;</span><br><span class="line"></span><br><span class="line">    server &#123;</span><br><span class="line">        listen       8080;</span><br><span class="line">        server_name  localhost;</span><br><span class="line"></span><br><span class="line">        #charset koi8-r;</span><br><span class="line"></span><br><span class="line">        #access_log  logs/host.access.log  main;</span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">            root   html;</span><br><span class="line">            index  index.html index.htm;</span><br><span class="line">            </span><br><span class="line">            #(6)ç¬¬ä¸€ç§æƒ…å†µ æ‹’ç»è®¿é—®ipåœ°å€æ®µä¸º 50-100 çš„ipè®¿é—®</span><br><span class="line">            deny 192.168.10.50/100;</span><br><span class="line">            </span><br><span class="line">            # ç¬¬äºŒç§æƒ…å†µ åªå…è®¸ipåœ°å€ä¸º 192.168.10.50 çš„ipè®¿é—®</span><br><span class="line">            allow 192.168.10.50;</span><br><span class="line">            deny all;</span><br><span class="line">            </span><br><span class="line">            # ç¬¬ä¸‰ç§æƒ…å†µ è¿™æ ·é…ç½®éƒ½ä¸èƒ½è®¿é—®ï¼Œä»ä¸Šåˆ°ä¸‹ä¾æ¬¡åŒ¹é…</span><br><span class="line">            deny all;</span><br><span class="line">            allow 192.168.10.50;</span><br><span class="line">        </span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        #(7)ç²¾ç¡®åŒ¹é… /test è·¯å¾„æ‹’ç»è®¿é—®</span><br><span class="line">        location =/test &#123; </span><br><span class="line">            deny all;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        #(8)ç²¾ç¡®åŒ¹é… /test2 è·¯å¾„éƒ½å¯ä»¥è®¿é—®</span><br><span class="line">        location =/test2 &#123;</span><br><span class="line">            allow all;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        #(9)ç²¾ç¡®åŒ¹é… å·² php ç»“å°¾æ‹’ç»è®¿é—®</span><br><span class="line">        location ~ \.php$ &#123; # æ­£åˆ™åŒ¹é…</span><br><span class="line">            deny all;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        #error_page  404              /404.html;</span><br><span class="line"></span><br><span class="line">        # redirect server error pages to the static page /50x.html</span><br><span class="line">        #</span><br><span class="line">        error_page   500 502 503 504  /50x.html;</span><br><span class="line">        location = /50x.html &#123;</span><br><span class="line">            root   html;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        # proxy the PHP scripts to Apache listening on 127.0.0.1:80</span><br><span class="line">        #</span><br><span class="line">        #location ~ \.php$ &#123;</span><br><span class="line">        #    proxy_pass   http://127.0.0.1;</span><br><span class="line">        #&#125;</span><br><span class="line"></span><br><span class="line">        # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000</span><br><span class="line">        #</span><br><span class="line">        #location ~ \.php$ &#123;</span><br><span class="line">        #    root           html;</span><br><span class="line">        #    fastcgi_pass   127.0.0.1:9000;</span><br><span class="line">        #    fastcgi_index  index.php;</span><br><span class="line">        #    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;</span><br><span class="line">        #    include        fastcgi_params;</span><br><span class="line">        #&#125;</span><br><span class="line"></span><br><span class="line">        # deny access to .htaccess files, if Apache&apos;s document root</span><br><span class="line">        # concurs with nginx&apos;s one</span><br><span class="line">        #</span><br><span class="line">        #location ~ /\.ht &#123;</span><br><span class="line">        #    deny  all;</span><br><span class="line">        #&#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    # another virtual host using mix of IP-, name-, and port-based configuration</span><br><span class="line">    #</span><br><span class="line">    #server &#123;</span><br><span class="line">    #    listen       8000;</span><br><span class="line">    #    listen       somename:8080;</span><br><span class="line">    #    server_name  somename  alias  another.alias;</span><br><span class="line"></span><br><span class="line">    #    location / &#123;</span><br><span class="line">    #        root   html;</span><br><span class="line">    #        index  index.html index.htm;</span><br><span class="line">    #    &#125;</span><br><span class="line">    #&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    # HTTPS server</span><br><span class="line">    #</span><br><span class="line">    #server &#123;</span><br><span class="line">    #    listen       443 ssl;</span><br><span class="line">    #    server_name  localhost;</span><br><span class="line"></span><br><span class="line">    #    ssl_certificate      cert.pem;</span><br><span class="line">    #    ssl_certificate_key  cert.key;</span><br><span class="line"></span><br><span class="line">    #    ssl_session_cache    shared:SSL:1m;</span><br><span class="line">    #    ssl_session_timeout  5m;</span><br><span class="line"></span><br><span class="line">    #    ssl_ciphers  HIGH:!aNULL:!MD5;</span><br><span class="line">    #    ssl_prefer_server_ciphers  on;</span><br><span class="line"></span><br><span class="line">    #    location / &#123;</span><br><span class="line">    #        root   html;</span><br><span class="line">    #        index  index.html index.htm;</span><br><span class="line">    #    &#125;</span><br><span class="line">    #&#125;</span><br><span class="line">    include servers/*;</span><br><span class="line">    #(10)å…¶ä»–é…ç½®æ–‡ä»¶</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<ul>
<li>å¯åŠ¨Nginx</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/Cellar/nginx/1.17.8/bin</span><br><span class="line"></span><br><span class="line">./nginx</span><br></pre></td></tr></table></figure>

<ul>
<li>é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./nginx -s reload</span><br></pre></td></tr></table></figure>

<p>å¯åŠ¨å®Œæˆä¹‹åæ‰§è¡Œ <code>ps -ef|grep nginx</code>ï¼Œå¦‚æœå‡ºç°ä¸‹é¢æ—¥å¿—åˆ™è¯´æ˜è®¿é—®æˆåŠŸã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">501 65101     1   0  8:59ä¸‹åˆ ??         0:00.00 nginx: master process ./nginx</span><br><span class="line">501 65102 65101   0  8:59ä¸‹åˆ ??         0:00.00 nginx: worker process</span><br><span class="line">501 65173 63026   0  9:00ä¸‹åˆ ttys001    0:00.00 grep nginx</span><br></pre></td></tr></table></figure>

<p>è®¿é—®<code>http://localhost:8080</code>ï¼Œå¦‚æœå‡ºç°ä»¥ä¸‹é¡µé¢è¯´æ˜æˆ‘ä»¬é…ç½®æˆåŠŸï¼Œå¹¶ä¸”è®¿é—®æ­£å¸¸ã€‚</p>
<p><img src="https://i.loli.net/2020/02/25/6b1Ci8rVLFvsKyI.png" alt="image.png"></p>
<h3 id="3-å®æˆ˜"><a href="#3-å®æˆ˜" class="headerlink" title="3. å®æˆ˜"></a>3. å®æˆ˜</h3><p>ç°åœ¨æˆ‘ä»¬å·²ç»å®‰è£…å’Œé…ç½®å¥½äº† Nginxï¼Œé‚£æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹åœ¨<strong>åå‘ä»£ç†</strong>è¿™ç§åœºæ™¯ä¸‹ Nginx æ˜¯å¦‚ä½•ä½¿ç”¨çš„ã€‚é¦–å…ˆæˆ‘ä»¬å…ˆç”¨ SpringBoot åˆ›å»ºä¸€ä¸ª Web æœåŠ¡ã€‚</p>
<p>åœ¨ <a href="https://start.spring.io/" target="_blank" rel="noopener">start.spring.io</a> åˆå§‹åŒ–ä¸€ä¸ªé¡¹ç›®æ–¹ä¾¿æˆ‘ä»¬æµ‹è¯•ã€‚</p>
<p><img src="https://i.loli.net/2020/02/25/esWGZ4N5gbETthv.png" alt="image.png"></p>
<p>ç”¨ Eclipse æˆ– InteliJ IDEA æ‰“å¼€åˆšåˆšåˆå§‹åŒ–å¥½çš„é¡¹ç›®ï¼Œæ•´ä¸ªå·¥ç¨‹çš„ç›®å½•å¦‚ä¸‹ã€‚</p>
<p><img src="https://i.loli.net/2020/02/25/lMk19ReY6JW8LUK.png" alt="image.png"></p>
<p>åœ¨ <code>NginxTestController</code> ä¸­å†™ä¸¤ä¸ªç®€å•çš„æ¥å£ï¼Œåˆ†åˆ«æ˜¯ <code>/hello/nginx</code> å’Œ <code>/hi/nginx</code>ï¼ŒåŒæ—¶åœ¨æ¥å£çš„å“åº”ä¸­è¿”å›å½“å‰ç¨‹åºåœ¨ç›‘å¬å“ªä¸ªç«¯å£å³ <code>serverPort</code>ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">@RestController</span><br><span class="line">public class NginxTestController &#123;</span><br><span class="line"></span><br><span class="line">    @Value(&quot;$&#123;server.port&#125;&quot;)</span><br><span class="line">    private int serverPort;</span><br><span class="line"></span><br><span class="line">    @RequestMapping(value = &quot;/hello/nginx&quot;, method = RequestMethod.GET)</span><br><span class="line">    public TestResponse getNginx() throws Exception &#123;</span><br><span class="line"></span><br><span class="line">        TestResponse response = new TestResponse();</span><br><span class="line">        response.setCode(200);</span><br><span class="line">        response.setMessage(&quot;success&quot;);</span><br><span class="line">        response.setName(&quot;hello nginx&quot;);</span><br><span class="line">        response.setServerPort(serverPort);</span><br><span class="line">        return response;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @RequestMapping(value = &quot;/hi/nginx&quot;, method = RequestMethod.GET)</span><br><span class="line">    public TestResponse getIncome() throws Exception &#123;</span><br><span class="line"></span><br><span class="line">        TestResponse response = new TestResponse();</span><br><span class="line">        response.setCode(200);</span><br><span class="line">        response.setMessage(&quot;success&quot;);</span><br><span class="line">        response.setName(&quot;hi nginx&quot;);</span><br><span class="line">        response.setServerPort(serverPort);</span><br><span class="line">        return response;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨ <code>application.properties</code> é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ç›‘å¬çš„ç«¯å£ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">server.port=8090</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">server.port=9090</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨ maven åˆ†åˆ«æ‰“åŒ…ä¸¤ä¸ªç›‘å¬ 8090 å’Œ 9090 ç«¯å£çš„ Web æœåŠ¡çš„ jar åŒ…ä¸º <code>nginxdemo-SNAPSHOT-8090.jar</code> å’Œ <code>nginxdemo-SNAPSHOT-9090.jar</code></p>
<p>åˆ†åˆ«å¯åŠ¨ä¸¤ä¸ª server</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">å¯åŠ¨ç¬¬ä¸€ä¸ª server</span><br><span class="line">java -jar nginxdemo-SNAPSHOT-8090.jar</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">å¯åŠ¨ç¬¬äºŒä¸ª server</span><br><span class="line">java -jar nginxdemo-SNAPSHOT-9090.jar</span><br></pre></td></tr></table></figure>

<p>åœ¨ä¸ä½¿ç”¨ Nginx åšåå‘ä»£ç†çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å…ˆè®¿é—®ä¸‹ä¸¤ä¸ª server çš„æ¥å£æ˜¯å¦éƒ½èƒ½æ­£å¸¸ä½¿ç”¨ï¼Œå¦‚ä¸‹å›¾è¡¨ç¤ºå‡æ­£å¸¸ã€‚</p>
<p>ç›‘å¬ 8090 ç«¯å£çš„ tomcat</p>
<p><img src="https://i.loli.net/2020/02/25/n7P35w2ulsGEjJK.png" alt="image.png"></p>
<p>ç›‘å¬ 9090 ç«¯å£çš„ tomcat</p>
<p><img src="https://i.loli.net/2020/02/25/c5VS4IaYlMFrNio.png" alt="image.png"></p>
<h4 id="åå‘ä»£ç†"><a href="#åå‘ä»£ç†" class="headerlink" title="åå‘ä»£ç†"></a>åå‘ä»£ç†</h4><ul>
<li>è§„åˆ™åŒ¹é…</li>
</ul>
<p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹ä¸Šé¢è®²è¿‡çš„å…³äºè®¿é—®è§„åˆ™çš„åŒ¹é…ï¼Œåœ¨ server å—ä¸­æ·»åŠ ä»¥ä¸‹ locationã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">location =/hello/nginx &#123;</span><br><span class="line">    deny all;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>server å—çš„å®Œæ•´é…ç½®å¦‚ä¸‹ï¼Œä¿®æ”¹å®Œæˆåé‡æ–°åŠ è½½ Nginx é…ç½®ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen       9000;</span><br><span class="line">    server_name  localhost;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        proxy_pass        http://localhost:8090;</span><br><span class="line">        proxy_set_header  Host $http_host;</span><br><span class="line">        proxy_set_header  X-Real-IP  $remote_addr;</span><br><span class="line">        proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">        proxy_set_header  X-Forwarded-Proto $scheme;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    location =/hello/nginx &#123;</span><br><span class="line">        deny all;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    error_page   500 502 503 504  /50x.html;</span><br><span class="line">    location = /50x.html &#123;</span><br><span class="line">        root   html;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç”±ä¸Šé¢çš„é…ç½®å¯ä»¥ <code>/hello/nginx</code> è¢«æ‹’ç»è®¿é—®ï¼Œæˆ‘ä»¬åœ¨æµè§ˆå™¨è®¿é—®å¯å¾—åˆ°å¦‚ä¸‹å›¾ç»“æœï¼š</p>
<p><code>/hello/nginx</code> è¢«æ‹’ç»è®¿é—®ã€‚</p>
<p><img src="https://i.loli.net/2020/02/25/XstLd1zhr9HA4KV.png" alt="image.png"></p>
<p><code>/hi/nginx</code> ä»ç„¶å¯ä»¥è®¿é—®ã€‚</p>
<p><img src="https://i.loli.net/2020/02/25/P2NS3urEvDlmJZI.png" alt="image.png"></p>
<ul>
<li>ä½¿ç”¨ç«¯å£å·è¿›è¡Œåå‘ä»£ç†<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">#user  nobody;</span><br><span class="line">worker_processes  1;</span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections  1024;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">    include       mime.types;</span><br><span class="line">    default_type  application/octet-stream;</span><br><span class="line"></span><br><span class="line">    sendfile        on;</span><br><span class="line">    keepalive_timeout  65;</span><br><span class="line"></span><br><span class="line">    server &#123;</span><br><span class="line">        listen       9000;</span><br><span class="line">        server_name  localhost;</span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">            proxy_pass        http://localhost:8090;</span><br><span class="line">            proxy_set_header  Host $http_host;</span><br><span class="line">            proxy_set_header  X-Real-IP  $remote_addr;</span><br><span class="line">            proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">            proxy_set_header  X-Forwarded-Proto $scheme;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        error_page   500 502 503 504  /50x.html;</span><br><span class="line">        location = /50x.html &#123;</span><br><span class="line">            root   html;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    server &#123;</span><br><span class="line">        listen       9001;</span><br><span class="line">        server_name  localhost;</span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">            proxy_pass        http://localhost:9090;</span><br><span class="line">            proxy_set_header  Host $http_host;</span><br><span class="line">            proxy_set_header  X-Real-IP  $remote_addr;</span><br><span class="line">            proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">            proxy_set_header  X-Forwarded-Proto $scheme;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    include servers/*;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>ä½¿ç”¨ç«¯å£è¿›è¡Œåå‘ä»£ç†æ¯”è¾ƒç®€å•ï¼Œæˆ‘ä»¬åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä¸¤ä¸ª server å—ï¼Œè®© Nginx åˆ†åˆ«ç›‘å¬ 9000 ç«¯å£å’Œ 9001 ç«¯å£ã€‚ç„¶ååœ¨ location å—ä¸­é€šè¿‡ proxy_pass åˆ†åˆ«ä»£ç†åˆ° tomcat çš„ 8090 ç«¯å£å’Œ 9090 ç«¯å£ã€‚</p>
<p>é€šè¿‡ Nginx è®¿é—® 9000 ç«¯å£ï¼Œå¯ä»¥çœ‹åˆ°è¿”å›çš„æ˜¯ tomcat 8090 ç«¯å£çš„å†…å®¹ã€‚<br><img src="https://i.loli.net/2020/02/25/cbouvn5xGCwpUJh.png" alt="image.png"><br>é€šè¿‡ Nginx è®¿é—® 9001 ç«¯å£ï¼Œå¯ä»¥çœ‹åˆ°è¿”å›çš„æ˜¯ tomcat 9090 ç«¯å£çš„å†…å®¹ã€‚<br><img src="https://i.loli.net/2020/02/25/GAKflMSde9aN2Yy.png" alt="image.png"></p>
<p>è¿™æ ·åšçš„ç›®çš„æ˜¯ï¼Œåœ¨çœŸå®çš„æœåŠ¡å™¨ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬ä¸å¯èƒ½æŠŠæ‰€æœ‰çš„ç«¯å£éƒ½å¼€æ”¾å‡ºå»ï¼Œæ¯”å¦‚ mysql å¸¸ç”¨çš„ 3306 ç«¯å£ï¼Œè¿™æ ·ä¼šæœ‰å¾ˆå¤§çš„å®‰å…¨é—®é¢˜ï¼Œé€šè¿‡ Nginx çš„åå‘ä»£ç†å°±å¯ä»¥è§£å†³ã€‚</p>
<ul>
<li>ä½¿ç”¨åŸŸåè¿›è¡Œåå‘ä»£ç†</li>
</ul>
<p>ä¸Šé¢è®²è¿‡äº†ä½¿ç”¨ç«¯å£è¿›è¡Œåå‘ä»£ç†ï¼Œåœ¨çœŸå®çš„å¼€å‘ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬æ›´å¤šçš„æ˜¯ä½¿ç”¨åŸŸåæˆ–è€…äºŒçº§åŸŸåæ¥è®¿é—®æŸäº›é¡µé¢æˆ–æ¥å£ï¼Œæˆ‘ä»¬é€šå¸¸æ˜¯ä¸éœ€è¦åœ¨åŸŸåä¸ŠåŠ ä¸Šç«¯å£å·çš„ã€‚è¿™æ˜¯å› ä¸º 80 æ˜¯ http åè®®çš„é»˜è®¤ç«¯å£ã€‚æˆ‘ä»¬åœ¨è®¿é—® <code>http://baidu.com</code> æ—¶å…¶å®æ˜¯è®¿é—® <code>http://baidu.com:80</code>ã€‚</p>
<p>é‚£ä¹ˆæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨ Nginx é€šè¿‡åŸŸåæ¥åšåå‘ä»£ç†ã€‚ç”±äºæˆ‘æ˜¯åœ¨æœ¬åœ°è¿›è¡Œå¼€å‘æµ‹è¯•çš„ï¼Œæ˜¯æ²¡æœ‰å…¬ç½‘çš„ ip åœ°å€çš„ï¼Œè¿™æ—¶å€™æ€ä¹ˆè®©ä¸€ä¸ªåŸŸåè§£æåˆ°æˆ‘è‡ªå·±çš„ ip ä¸Šå‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥ä¿®æ”¹ hosts æ–‡ä»¶ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1 hello.democome.local</span><br><span class="line">127.0.0.1 hi.democome.local</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸Šæ˜¯æˆ‘ç»™æœ¬æœºçš„ hosts æ–‡ä»¶æ·»åŠ çš„ä¸¤è¡Œé…ç½®ï¼Œæˆ‘ä»¬çŸ¥é“æ˜¯æ²¡æœ‰ .local è¿™ä¸ªåŸŸåçš„ï¼Œä½†æ˜¯åŠ ä¸Šä¸Šé¢çš„é…ç½®ä¹‹åå½“æˆ‘è®¿é—® <code>hello.democome.local</code> å’Œ <code>hi.democome.local</code> æ—¶ï¼Œå°±ä¼šè§£æåˆ°æˆ‘çš„æœ¬æœºï¼Œè¿™æ ·å°±å¯ä»¥é€šè¿‡ Nginx è¿›è¡Œåå‘ä»£ç†äº†ï¼Œæˆ‘ä»¬çœ‹çœ‹å…·ä½“çš„ Nginx é…ç½®æ–‡ä»¶ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">#user  nobody;</span><br><span class="line">worker_processes  1;</span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections  1024;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">    include       mime.types;</span><br><span class="line">    default_type  application/octet-stream;</span><br><span class="line"></span><br><span class="line">    sendfile        on;</span><br><span class="line">    keepalive_timeout  65;</span><br><span class="line"></span><br><span class="line">    server &#123;</span><br><span class="line">        listen       80;</span><br><span class="line">        server_name  hello.democome.local;</span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">            proxy_pass        http://localhost:8090;</span><br><span class="line">            proxy_set_header  Host $http_host;</span><br><span class="line">            proxy_set_header  X-Real-IP  $remote_addr;</span><br><span class="line">            proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">            proxy_set_header  X-Forwarded-Proto $scheme;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        error_page   500 502 503 504  /50x.html;</span><br><span class="line">        location = /50x.html &#123;</span><br><span class="line">            root   html;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    server &#123;</span><br><span class="line">        listen       80;</span><br><span class="line">        server_name  hi.democome.local;</span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">            proxy_pass        http://localhost:9090;</span><br><span class="line">            proxy_set_header  Host $http_host;</span><br><span class="line">            proxy_set_header  X-Real-IP  $remote_addr;</span><br><span class="line">            proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">            proxy_set_header  X-Forwarded-Proto $scheme;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    include servers/*;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šé…ç½®ï¼Œæˆ‘ä»¬æŠŠä¸¤ä¸ª server å—ä¸­ç›‘å¬çš„ç«¯å£éƒ½æ”¹ä¸ºäº† 80ï¼Œç„¶åä¸¤ä¸ªäºŒçº§åŸŸå <code>hello.democome.local</code> å’Œ <code>hi.democome.local</code> åˆ†åˆ«ä»£ç†åˆ°äº† <code>http://localhost:8090</code> å’Œ<code>http://localhost:9090</code> ä¸¤ä¸ª web serverã€‚</p>
<p>åœ¨æµè§ˆå™¨è®¿é—® <code>http://hello.democome.local/hello/nginx</code> å¯ä»¥çœ‹åˆ°å¯ä»¥æ­£å¸¸è¿”å› 8090 ç«¯å£çš„å†…å®¹ã€‚</p>
<p><img src="https://i.loli.net/2020/02/25/fXJUszFpOSZ3aIR.png" alt="image.png"></p>
<p>åœ¨æµè§ˆå™¨è®¿é—® <code>http://hi.democome.local/hello/nginx</code> å¯ä»¥çœ‹åˆ°å¯ä»¥æ­£å¸¸è¿”å› 9090 ç«¯å£çš„å†…å®¹ã€‚</p>
<p><img src="https://i.loli.net/2020/02/25/gQAam9pIu24ZyUs.png" alt="image.png"></p>
<p>é€šè¿‡ä»¥ä¸Šæµ‹è¯•ï¼Œæˆ‘ä»¬çš„é…ç½®æ˜¯ç”Ÿæ•ˆçš„ã€‚</p>
<p>å¦‚æœä¸æƒ³ä½¿ç”¨é»˜è®¤çš„ 80 ç«¯å£ï¼Œæˆ‘ä»¬ä¾ç„¶å¯ä»¥ä½¿ç”¨åŸŸååŠ ä¸Šç«¯å£çš„å½¢å¼è®¿é—®ï¼Œé…ç½®å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen       9000;</span><br><span class="line">    server_name  hello.democome.local;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        proxy_pass        http://localhost:8090;</span><br><span class="line">        proxy_set_header  Host $http_host;</span><br><span class="line">        proxy_set_header  X-Real-IP  $remote_addr;</span><br><span class="line">        proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">        proxy_set_header  X-Forwarded-Proto $scheme;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    error_page   500 502 503 504  /50x.html;</span><br><span class="line">    location = /50x.html &#123;</span><br><span class="line">        root   html;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹å®Œé…ç½®é‡æ–°åŠ è½½ï¼Œå¯ä»¥çœ‹åˆ°é€šè¿‡åŸŸååŠ ç«¯å£ä¹Ÿå¯ä»¥æ­£å¸¸è®¿é—®ã€‚<br><img src="https://i.loli.net/2020/02/25/dtw5vpSKl7WjBoy.png" alt="image.png"></p>
<ul>
<li>ä»£ç†åˆ°å…¶ä»–ç½‘ç«™<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen       80;</span><br><span class="line">    server_name  hi.democome.local;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        proxy_pass        https://www.so.com/;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>æˆ‘ä»¬æŠŠ server å—æ”¹æˆå¦‚ä¸‹é…ç½®ï¼Œç„¶åé‡æ–°åŠ è½½ Nginx é…ç½®ï¼Œå¯ä»¥å‘ç°è™½ç„¶æˆ‘ä»¬è®¿é—®çš„æ˜¯ <code>hi.democome.local</code> ä½†æ˜¯çœŸæ­£è¿”å›çš„é¡µé¢æ˜¯ 360 æœç´¢çš„é¡µé¢ï¼Œå¹¶ä¸”åŸŸåä¹Ÿä¸ä¼šå˜åŒ–ã€‚</p>
<p><img src="https://i.loli.net/2020/02/25/X54hFOziWCb21ou.png" alt="image.png"></p>
<h4 id="è´Ÿè½½å‡è¡¡"><a href="#è´Ÿè½½å‡è¡¡" class="headerlink" title="è´Ÿè½½å‡è¡¡"></a>è´Ÿè½½å‡è¡¡</h4><p>è¯´åˆ°è´Ÿè½½å‡è¡¡ï¼Œé‚£ä¹ˆä»€ä¹ˆæ˜¯è´Ÿè½½å‡è¡¡ï¼Œå…ˆæ¥çœ‹ä¸€ä¸‹ç»´åŸºç™¾ç§‘çš„å®šä¹‰</p>
<blockquote>
<p>è´Ÿè½½å¹³è¡¡ï¼ˆLoad balancingï¼‰æ˜¯ä¸€ç§è®¡ç®—æœºæŠ€æœ¯ï¼Œç”¨æ¥åœ¨å¤šä¸ªè®¡ç®—æœºï¼ˆè®¡ç®—æœºé›†ç¾¤ï¼‰ã€ç½‘ç»œè¿æ¥ã€CPUã€ç£ç›˜é©±åŠ¨å™¨æˆ–å…¶ä»–èµ„æºä¸­åˆ†é…è´Ÿè½½ï¼Œä»¥è¾¾åˆ°æœ€ä¼˜åŒ–èµ„æºä½¿ç”¨ã€æœ€å¤§åŒ–ååç‡ã€æœ€å°åŒ–å“åº”æ—¶é—´ã€åŒæ—¶é¿å…è¿‡è½½çš„ç›®çš„ã€‚ ä½¿ç”¨å¸¦æœ‰è´Ÿè½½å¹³è¡¡çš„å¤šä¸ªæœåŠ¡å™¨ç»„ä»¶ï¼Œå–ä»£å•ä¸€çš„ç»„ä»¶ï¼Œå¯ä»¥é€šè¿‡å†—ä½™æé«˜å¯é æ€§ã€‚è´Ÿè½½å¹³è¡¡æœåŠ¡é€šå¸¸æ˜¯ç”±ä¸“ç”¨è½¯ä»¶å’Œç¡¬ä»¶æ¥å®Œæˆã€‚ ä¸»è¦ä½œç”¨æ˜¯å°†å¤§é‡ä½œä¸šåˆç†åœ°åˆ†æ‘Šåˆ°å¤šä¸ªæ“ä½œå•å…ƒä¸Šè¿›è¡Œæ‰§è¡Œï¼Œç”¨äºè§£å†³äº’è”ç½‘æ¶æ„ä¸­çš„é«˜å¹¶å‘å’Œé«˜å¯ç”¨çš„é—®é¢˜ã€‚</p>
</blockquote>
<p>æ€»ç»“æ¥è¯´è´Ÿè½½å‡è¡¡å°±æ˜¯è§£å†³é«˜å¹¶å‘çš„ã€‚å‡å¦‚æˆ‘ä»¬æœ‰å¤šå°æœåŠ¡å™¨ï¼Œæˆ‘ä»¬åœ¨æ¯å°æœåŠ¡å™¨ä¸Šéƒ½è·‘äº†ç›¸åŒçš„åº”ç”¨ï¼Œå½“ç”¨æˆ·è®¿é—®æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ› Nginx æŠŠç”¨æˆ·çš„è¯·æ±‚æ ¹æ®ä¸€å®šçš„ç­–ç•¥è½¬å‘çš„ä¸åŒçš„æœåŠ¡å™¨ï¼Œå·²è§£å†³å•ä¸ªæœåŠ¡å™¨è®¿é—®å‹åŠ›å¤§çš„é—®é¢˜ã€‚</p>
<p>ä¸ºäº†æµ‹è¯•è¿™ä¸ªæ•ˆæœï¼Œæˆ‘å…ˆæŠŠä¹‹å‰æ‰“åŒ…çš„ jar æ–‡ä»¶ä¸Šä¼ ä¸€ä¸ªåˆ°è¿œç¨‹çš„æœåŠ¡å™¨ä¸Šï¼Œå¹¶å¯åŠ¨ã€‚</p>
<p>æˆ‘ä»¬çœ‹ä¸€ä¸‹å…·ä½“å¦‚ä½•é…ç½®ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">#user  nobody;</span><br><span class="line">worker_processes  1;</span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections  1024;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">    include       mime.types;</span><br><span class="line">    default_type  application/octet-stream;</span><br><span class="line"></span><br><span class="line">    sendfile        on;</span><br><span class="line">    keepalive_timeout  65;</span><br><span class="line"></span><br><span class="line">    upstream localhost &#123;</span><br><span class="line">        server 62.234.66.219:8090 weight=1; #è¿œç¨‹æœåŠ¡å™¨</span><br><span class="line">        server 192.168.0.101:8090 weight=3;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    server &#123;</span><br><span class="line">        listen       80;</span><br><span class="line">        server_name  hello.democome.local;</span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">            add_header Backend-IP $upstream_addr;</span><br><span class="line">            proxy_pass        http://localhost;</span><br><span class="line">            proxy_set_header  Host $http_host;</span><br><span class="line">            proxy_set_header  X-Real-IP  $remote_addr;</span><br><span class="line">            proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">            proxy_set_header  X-Forwarded-Proto $scheme;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        error_page   500 502 503 504  /50x.html;</span><br><span class="line">        location = /50x.html &#123;</span><br><span class="line">            root   html;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    include servers/*;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ä¸»è¦æ˜¯ upstream å—çš„é…ç½®ï¼Œæˆ‘é…ç½®äº†ä¸¤ä¸ªæœåŠ¡å™¨ï¼Œå…¶ä¸­ 62.234.66.219:8090 æ˜¯è…¾è®¯äº‘æœåŠ¡å™¨çš„åœ°å€ï¼Œ 192.168.0.101:8090 æ˜¯æˆ‘æœ¬æœºçš„ ip åœ°å€ã€‚ç­–ç•¥æ˜¯æŒ‰ç…§æ¯”é‡æ¥åˆ†åˆ«è½¬å‘åˆ°ä¸¤ä¸ªæœåŠ¡å™¨ä¸Šï¼Œæ¯”ä¾‹ä¸º1:3ã€‚å…³äºç­–ç•¥è¿˜æœ‰å¾ˆå¤šè§„åˆ™ï¼Œæ¯”å¦‚æ ¹æ® ip hash ç­‰ã€‚æˆ‘ä»¬è¿™é‡Œåªæ¼”ç¤º weight ç­–ç•¥ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">upstream localhost &#123;</span><br><span class="line">    server 62.234.66.219:8090 weight=1; #è¿œç¨‹æœåŠ¡å™¨</span><br><span class="line">    server 192.168.0.101:8090 weight=3;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å®Œæˆå¥½ä¸Šé¢çš„é…ç½®æ‰§è¡Œ <code>nginx -s reload</code> é‡æ–°åŠ è½½é…ç½®ã€‚ç»§ç»­è®¿é—®<code>http://hello.democome.local/hello/nginx</code>ã€‚</p>
<p>å¦‚ä¸‹å›¾ï¼Œæœ¬æ¬¡è¯·æ±‚æ¥è‡ª192.168.0.101<br><img src="https://i.loli.net/2020/02/25/D8UZTGRMo57EISV.png" alt="image.png"></p>
<p>å¦‚ä¸‹å›¾ï¼Œæœ¬æ¬¡è¯·æ±‚æ¥è‡ª 62.234.66.219<br><img src="https://i.loli.net/2020/02/25/9MqkOUJj21RD75L.png" alt="image.png"></p>
<p>é€šè¿‡å¤šæ¬¡è¯·æ±‚æˆ‘ä»¬å‘ç°ï¼Œè½¬å‘åˆ°å„ä¸ªæœåŠ¡å™¨çš„æ¯”ä¾‹åŸºæœ¬æ˜¯ 1:3ï¼Œä»¥ä¸Šè¯´æ˜æˆ‘ä»¬é…ç½®çš„è´Ÿè½½å‡è¡¡ç­–ç•¥æ˜¯ç”Ÿæ•ˆçš„ã€‚</p>
<h4 id="httpsè¯ä¹¦é…ç½®"><a href="#httpsè¯ä¹¦é…ç½®" class="headerlink" title="httpsè¯ä¹¦é…ç½®"></a>httpsè¯ä¹¦é…ç½®</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen 443 ssl;                                                     </span><br><span class="line">    server_name democome.com www.democome.com; #é…ç½®åŸŸå</span><br><span class="line">    ssl_certificate /etc/letsencrypt/live/democome.com/fullchain.pem; #é…ç½®è¯ä¹¦ä½ç½®</span><br><span class="line">    ssl_certificate_key /etc/letsencrypt/live/democome.com/privkey.pem; #é…ç½®è¯ä¹¦ä½ç½®</span><br><span class="line">    location /&#123;                                                         #åå‘ä»£ç†é…ç½®</span><br><span class="line">        proxy_pass            http://localhost:8080;</span><br><span class="line">        proxy_set_header  Host $http_host;</span><br><span class="line">        proxy_set_header  X-Real-IP  $remote_addr;</span><br><span class="line">        proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">        proxy_set_header  X-Forwarded-Proto $scheme;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é…ç½®è¯ä¹¦æ¯”è¾ƒç®€å•ï¼Œé¦–å…ˆç›‘å¬ 443 ç«¯å£ï¼Œç„¶åæ‰§è¡Œè¯ä¹¦ä½ç½®å³å¯ã€‚</p>
<h3 id="æ›´å¤šæ¨è"><a href="#æ›´å¤šæ¨è" class="headerlink" title="æ›´å¤šæ¨è"></a>æ›´å¤šæ¨è</h3><p>å…è´¹ https è¯ä¹¦ç”³è¯· <a href="https://letsencrypt.org/" target="_blank" rel="noopener">letsencrypt</a>ã€‚</p>

  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">é¦–é¡µ</a></li>
         
          <li><a href="/about/">å…³äº</a></li>
         
          <li><a href="/archives/">å½’æ¡£</a></li>
         
          <li><a href="/project/">é¡¹ç›®</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-Nginxç®€ä»‹"><span class="toc-number">1.</span> <span class="toc-text">1. Nginxç®€ä»‹</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#åå‘ä»£ç†å’Œæ­£å‘ä»£ç†"><span class="toc-number">1.1.</span> <span class="toc-text">åå‘ä»£ç†å’Œæ­£å‘ä»£ç†</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-NginxåŸºæœ¬ä½¿ç”¨"><span class="toc-number">2.</span> <span class="toc-text">2. NginxåŸºæœ¬ä½¿ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Nginxå®‰è£…"><span class="toc-number">2.1.</span> <span class="toc-text">Nginxå®‰è£…</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-å®æˆ˜"><span class="toc-number">3.</span> <span class="toc-text">3. å®æˆ˜</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#åå‘ä»£ç†"><span class="toc-number">3.1.</span> <span class="toc-text">åå‘ä»£ç†</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#è´Ÿè½½å‡è¡¡"><span class="toc-number">3.2.</span> <span class="toc-text">è´Ÿè½½å‡è¡¡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#httpsè¯ä¹¦é…ç½®"><span class="toc-number">3.3.</span> <span class="toc-text">httpsè¯ä¹¦é…ç½®</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#æ›´å¤šæ¨è"><span class="toc-number">4.</span> <span class="toc-text">æ›´å¤šæ¨è</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://yoursite.com/2020/03/02/Nginx%E5%AE%9E%E6%88%98/" target="_blank" rel="noopener"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://yoursite.com/2020/03/02/Nginx%E5%AE%9E%E6%88%98/&text=Nginxå®æˆ˜" target="_blank" rel="noopener"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://yoursite.com/2020/03/02/Nginx%E5%AE%9E%E6%88%98/&title=Nginxå®æˆ˜" target="_blank" rel="noopener"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://yoursite.com/2020/03/02/Nginx%E5%AE%9E%E6%88%98/&is_video=false&description=Nginxå®æˆ˜" target="_blank" rel="noopener"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Nginxå®æˆ˜&body=Check out this article: http://yoursite.com/2020/03/02/Nginx%E5%AE%9E%E6%88%98/" target="_blank" rel="noopener"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://yoursite.com/2020/03/02/Nginx%E5%AE%9E%E6%88%98/&title=Nginxå®æˆ˜" target="_blank" rel="noopener"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://yoursite.com/2020/03/02/Nginx%E5%AE%9E%E6%88%98/&title=Nginxå®æˆ˜" target="_blank" rel="noopener"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://yoursite.com/2020/03/02/Nginx%E5%AE%9E%E6%88%98/&title=Nginxå®æˆ˜" target="_blank" rel="noopener"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://yoursite.com/2020/03/02/Nginx%E5%AE%9E%E6%88%98/&title=Nginxå®æˆ˜" target="_blank" rel="noopener"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://yoursite.com/2020/03/02/Nginx%E5%AE%9E%E6%88%98/&name=Nginxå®æˆ˜&description=" target="_blank" rel="noopener"><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> èœå•</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> ç›®å½•</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> åˆ†äº«</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> è¿”å›é¡¶éƒ¨</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2021 ä¹ç‚¹ä¸‹ç­
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">é¦–é¡µ</a></li>
         
          <li><a href="/about/">å…³äº</a></li>
         
          <li><a href="/archives/">å½’æ¡£</a></li>
         
          <li><a href="/project/">é¡¹ç›®</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">

    <!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>
<!-- clipboard -->

  <script src="/lib/clipboard/clipboard.min.js"></script>
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"å¤åˆ¶åˆ°ç²˜è´´æ¿!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight .code pre").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      target: function(trigger) {
        return trigger.nextElementSibling;
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "å¤åˆ¶æˆåŠŸ!");
      e.clearSelection();
    })
  })
  </script>

<script src="/js/main.js"></script>
<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Disqus Comments -->


</body>
</html>
